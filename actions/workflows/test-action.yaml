---
version: '2.0'

stackstorm_demo.test-action:
  tasks:
    delegate:
      # [165, 55]
      action: core.noop
      publish:
        hello: "hello world"
      on-success:
        - diagnose
        - blame

    diagnose:
      action: core.local
      input:
        cmd: >
          node index diagnose
        cwd: /opt/stackstorm/bin/stackstorm_demo_cli
      publish:
        diagnosis: "{{ task('diagnose').result }}"

    blame:
      action: core.local
      input:
        cmd: >
          node index blame
        cwd: /opt/stackstorm/bin/stackstorm_demo_cli

