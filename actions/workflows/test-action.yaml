---
version: '2.0'

stackstorm_demo.test-action:
  tasks:
    delegate:
      # [165, 55]
      action: core.noop
      publish:
        hello: "hello world"
      on-success:
        - diagnose
        - blame

    diagnose:
      action: core.local
      inputs:
        cmd: >
          node /opt/stackstorm/bin/stackstorm_demo_cli/index diagnose
      publish:
        diagnosis: "{{ task('diagnose').result }}"

    blame:
      action: core.local
      inputs:
        cmd: >
          node /opt/stackstorm/bin/stackstorm_demo_cli/index blame

